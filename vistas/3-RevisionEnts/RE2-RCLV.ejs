<%- include('CMP-TimerContador') %>
<section id="tituloConAyuda">
	<h1 id="titulo"><%= titulo %></h1>
	<!-- Ayuda -->
	<i id="iconoAyuda" class="fa-solid fa-circle-question despl_click">
		<ul class="mensajeAyuda ocultar despl_mostrar" type="dots">
			<li>Necesitamos que nos digas si estás de acuerdo con la información editada.</li>
			<li>Si considerás que no, te vamos a pedir que nos digas el motivo.</li>
		</ul>
	</i>
</section>
<section id="zonaDeGrow">
	<div id="dataEntry" class="flex-col">
		<!-- Datos -->
		<div id="datos" class="flex-row OK">
			<!--Primera columna-->
			<div id="primeraCol">
				<!-- Nombre: Título, Ayuda y Error/OK -->
				<div class="flex-row">
					<div class="margenBottomTitulo relative">
						<!-- Título -->
						<h3>Nombre</h3>
						<!-- Ayuda -->
						<i class="fa-solid fa-circle-question"></i>
						<ul type="dots" class="mensajeAyuda ocultar">
							<% if (entidad == "personajes") { %>
								<li>El nombre sin prefijo (San, Santa, Madre, Don, Papa).</li>
								<li>Si la persona cambió su nombre, se usa el más conocido.</li>
							<% } %>
							<li>Si querés editar los datos de un registro existente, escribí el nombre.</li>
						</ul>
						<!-- Error/OK -->
						<%- include("CMP-errorOK_visible", {campo: "nombre"}) %>
					</div>
				</div>
				<!-- Nombre: Input -->
				<input type="text" name="nombre" class="input" value="<%= RCLV_original.nombre %>" autofocus autocomplete="off">
				<!-- Fecha Representativa: Título, Ayuda y Error/OK -->
				<div class="borderTop flex-row">
					<div class="margenBottomTitulo relative">
						<!-- Título -->
						<h3>Fecha más representativa</h3>
						<!-- Ayuda -->
						<i class="fa-solid fa-circle-question"></i>
						<ul type="dots" class="mensajeAyuda ocultar">
							<li>Usamos la fecha en que se lo recuerda.</li>
							<li>Para los santos o beatos, es la fecha en el santoral.</li>
							<li>Para los demás, suele ser la fecha de su muerte.</li>
						</ul>
						<!-- Error/OK -->
						<%- include("CMP-errorOK_visible", {campo: "fecha"}) %>
					</div>
				</div>
				<!-- Fecha Representativa: Valores -->
				<div id="valoresFecha" class="flex-col space-between">
					<!-- Meses -->
					<div class="flexRowAlign">
						<label style="width: 40px;">Mes:</label>
						<select name="mes_id" class="input">
							<option value="" class="ocultar" <% if (!RCLV_original.mes_id) { %>selected<% } %>>Elegí</option>
							<% for (let mes of meses) { %>
								<option value="<%= mes.id %>" <% if (mes.id == mes_id) { %>selected<% } %>>
									<%= mes.nombre %>
								</option>
							<% } %>
						</select>
						<a href="//es.wikipedia.org/wiki/<%= RCLV_original.nombre %>" id="wiki" target="blank" class="ocultar" tabindex="-1">
							<img src="/imagenes/0-Logos/BD-Wiki.jpg" title="Consultar en Wikipedia">
						</a>
						<a href="//santopedia.com/buscar?q=<%= RCLV_original.nombre %>" id="santopedia" target="blank" class="ocultar" tabindex="-1">
							<img src="/imagenes/0-Base/Cruz.jpg" title="Consultar en Santopedia">
						</a>
					</div>
					<!-- Días -->
					<div class="flexRowAlign">
						<label style="width: 40px;">Día:</label>
						<select name="dia" class="input">
							<option value="" class="ocultar" <% if (!RCLV_original.dia) { %>selected<% } %>>Elegí</option>
							<% for (let dia = 1; dia < 32; dia++) { %>
								<option value="<%= dia %>" 
									<% if (dia > 29) { %>class="ocultar"<% } %>
									<% if (dia == dia_id) { %>selected<% } %>
								>
									<%= dia %>
								</option>
							<% } %>
						</select>
					</div>
					<!-- Fecha desconocida -->
					<div class="flex-row align-center">
						<input class="input" type="checkbox" name="desconocida" style="margin-right: 5px;" 
							<% if (!RCLV_original.dia_del_ano_id) { %>checked<% } %>
							tabindex="-1"
						>
						<label>Sin fecha representativa</label>
					</div>
				</div>
				<!-- Año de nacimiento u ocurrencia -->
				<% if (entidad != "valores") { %>
					<div class="borderTop flex-row">
						<div class="margenBottomTitulo relative flex-row align-center">
							<!-- Título -->
							<h3>Año de <%= entidad == "personajes" ? "Nacimiento" : "Ocurrencia" %></h3>
							<input type="number" name="ano" class="input" value="<%= RCLV_original.ano %>" autofocus autocomplete="off">
							<!-- Ayuda -->
							<i class="fa-solid fa-circle-question"></i>
							<ul type="dots" class="mensajeAyuda ocultar">
								<li>Nos ayuda a ubicar cronológicamente al <%= RCLV_original.producto_RCLV %>.</li>
								<li>Si es anterior a Cristo, elegí un valor negativo.</li>
								<li>Si no se conoce el año exacto, por favor hacé tu mejor estimación.</li>
							</ul>
							<!-- Error/OK -->
							<%- include("CMP-errorOK_visible", {campo: "ano"}) %>
						</div>
					</div>
				<% } %>
			</div>
			<!--Segunda columna-->
			<div id="segundaCol">
				<div class="relative">
					<h3>Nombres con esa fecha</h3>
					<!-- Error/OK -->
					<%- include("CMP-errorOK_visible", {campo: "duplicados"}) %>
				</div>
				<p>Destildalos para controlar si no está ya en nuestra BD</p>
				<ul type="none" id="posiblesRepetidos"></ul>
			</div>
		</div>
		<!-- Relación con la Iglesia (sólo para personajes históricos) -->
		<% if (entidad == "personajes") { %>
			<div id="RCLI" class="borderTop flex-row space-between OK">
				<!-- Primera columna -->
				<div class="flex-col">
					<!-- En proceso de canonización: Título y Error/OK -->
					<div class="margenBottomTitulo relative">
						<!-- Título -->
						<h3 class="">Relación con la Iglesia</h3>
						<!-- Error/OK -->
						<%- include("CMP-errorOK_visible", {campo: "RCLI"}) %>
					</div>
					<!-- ¿En proceso de canonización? -->
					<h4 id="santosanta">Es santo o está en proceso de canonización:</h4>
					<div id="opcionesIglesia" class="flex-row">
						<div class="flexRowAlign">
							<input type="radio" name="enProcCan" value="1" <% if (RCLV_original.proceso_id) { %>checked<% } %>>
							<label>SI</label>
						</div>
						<div class="flexRowAlign">
							<input type="radio" name="enProcCan" value="0" <% if (!RCLV_original.proceso_id) { %>checked<% } %>>
							<label>NO</label>
						</div>
					</div>
				</div>
				<!-- Sectores ocultos salvo que esté en proceso de canonización -->
				<div id="ocultarEnProcCan" class="invisible flex-col space-between">
					<!-- Genero -->
					<div id="genero" class="flex-row oculta">
						<h4>Género:</h4>
						<div class="flex-row">
							<% let rol_iglesia_id = RCLV_original.rol_iglesia_id ? RCLV_original.rol_iglesia_id.slice(-1) : "" %>
							<div class="flexRowAlign">
								<input type="radio" name="genero" value="V" <% if (rol_iglesia_id=="V") { %>checked<% } %>>
								<label>Varón</label>
							</div>
							<div class="flexRowAlign">
								<input type="radio" name="genero" value="M" <% if (rol_iglesia_id=="M") { %>checked<% } %>>
								<label>Mujer</label>
							</div>
						</div>
					</div>
					<!-- Status del proceso de canonización -->
					<div class="flexRowAlign">
						<label>Status del proceso:</label>
						<select name="proceso_id">
							<option value="" <% if (RCLV_original.proceso_id=="") { %> selected <% } %> class="ocultar">Elejí</option>
							<% for (let proceso of procesos_canonizacion) { %>
								<option value="<%= proceso.id %>" <% if (proceso.id == RCLV_original.proceso_id) { %> selected <% } %>><%= proceso.nombre %></option>
							<% } %> 
						</select>
					</div>
					<!-- Rol en la Iglesia -->
					<div class="flexRowAlign">
						<label>Rol en la Iglesia:</label>
						<select name="rol_iglesia_id">
							<option value="" <% if (RCLV_original.rol_iglesia_id=="") { %> selected <% } %> class="ocultar">Elejí una opción</option>
							<% for (let rol_iglesia of roles_iglesia) { %>
								<option value="<%= rol_iglesia.id %>" <% if (RCLV_original.rol_iglesia_id==rol_iglesia.id) { %> selected <% } %><% if (rol_iglesia.id=="PC") {%> class="ocultar" <% } %>><%= rol_iglesia.nombre %></option>
							<% } %> 
						</select>
					</div>
				</div>
			</div>	
		<% } %>
		<!-- Flechas -->
		<div id="flechas">
			<i id="liberarSalir" class="fa-solid fa-circle-left"></i>
			<button type="text" class="inactivo"><i class="fa-solid fa-circle-check"></i></button>
		</div>
	</div>	
</section>
