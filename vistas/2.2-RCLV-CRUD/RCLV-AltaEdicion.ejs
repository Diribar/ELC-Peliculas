<% if (codigo != "agregar") { %>
	<%- include('CMP-TimerContador') %>
	<%- include('CMP-Cartel') %>
<% } %>
<div id="tituloPrincipal">
	<h1 id="titulo"><%= tituloCuerpo %> </h1>
	<!-- Ayuda -->
	<div class="ayuda">
		<i class="fa-solid fa-circle-question ayudaClick despl_click">
			<ul class="ayudaMostrar ocultar despl_mostrar" type="dots">
				<li>Ayuda...</li>
			</ul>
		</i>
	</div>
</div>
<form method="POST" id="dataEntry" class="aparece">
	<!-- Encabezado -->
	<section id="datos" class="OK">
		<!--Primera columna-->
		<div id="primeraCol">
			<!-- Nombre -->
			<div class="flex-col">
				<!-- Título, Ayuda y Error/OK -->
				<div class="flex-row">
					<div class="margenBottomTitulo inputError" style="z-index: 5;">
						<!-- Título -->
						<h3>Nombres</h3>
						<!-- Ayuda -->
						<div class="ayuda">
							<i class="fa-solid fa-circle-question ayudaClick despl_click">
								<ul type="dots" class="ayudaMostrar ocultar despl_mostrar">
									<% if (entidad == "personajes") { %>
										<li>Nombre Alternativo: se usa cuando la persona es conocida con dos nombres distintos (ej: Juan Pablo II / Karol Wojtyla).</li>
									<% } %>
									<li>La primera letra debe ser en mayúscula.</li>
									<li>Sólo se aceptan letras del alfabeto castellano.</li>
								</ul>
							</i>
						</div>
						<%- include("CMP-errores", {campo:"nombre", display: true}) %>
					</div>
				</div>
				<!-- Valores -->
				<div id="valoresNombre" class="flex-col space-between">
					<!-- Nombre -->
					<div class="flexRowAlign space-between altoFila">
						<label><%- entidad=="personas" ? 'Más conocido' : 'Nombre' %>:</label>
						<input type="text" name="nombre" class="input" value="<%= dataEntry.nombre %>" autofocus autocomplete="off">
					</div>
					<% if (entidad == "personajes") { %>
						<div class="flexRowAlign space-between altoFila">
							<label>Alternativo:</label>
							<input type="text" name="apodo" class="input" value="<%= dataEntry.apodo %>" autocomplete="off">
						</div>
					<% } %>
				</div>
			</div>
			<!-- Fecha Representativa -->
			<div class="borderTop flex-col">
				<!-- Título, Ayuda y Error/OK -->
				<div class="flex-row">
					<div class="margenBottomTitulo inputError" style="z-index: 4;">
						<!-- Título -->
						<h3>Fecha más representativa</h3>
						<!-- Ayuda -->
						<div class="ayuda">
							<i class="fa-solid fa-circle-question ayudaClick despl_click">
								<ul type="dots" class="ayudaMostrar ocultar despl_mostrar">
									<p>Usamos la fecha en que se lo recuerda.</p>
									<% if (entidad == "personajes") { %>
										<li>Para los santos o beatos, se usa la fecha del santoral (Novus Ordo).</li>
										<li>Para los demás, suele ser la fecha de su muerte.</li>
									<% } %>
								</ul>
							</i>
						</div>
						<%- include("CMP-errores", {campo:"fecha", display: true}) %>
					</div>
				</div>
				<!-- Valores -->
				<div id="valoresFecha" class="flex-col space-between">
					<!-- Meses -->
					<div class="flexRowAlign altoFila">
						<label style="width: 35px;">Mes:</label>
						<select name="mes_id" class="input">
							<option value="" class="ocultar" <% if (!dataEntry.mes_id) { %>selected<% } %>>Elegí</option>
							<% for (let mes of meses) { %>
								<option value="<%= mes.id %>" <% if (dataEntry.mes_id == mes.id) { %>selected<% } %>>
									<%= mes.nombre %>
								</option>
							<% } %>
						</select>
						<a id="wiki" target="blank" class="links ocultar" tabindex="-1"><img src="/imagenes/0-Logos/BD-Wiki.jpg" title="Consultar en Wikipedia"></a>
						<a id="santopedia" target="blank" class="links ocultar" tabindex="-1"><img src="/imagenes/0-Logos/BD-Santopedia.jpg" title="Consultar en Santopedia"></a>
					</div>
					<!-- Días -->
					<div class="flexRowAlign altoFila">
						<label style="width: 35px;">Día:</label>
						<select name="dia" class="input">
							<option value="" class="ocultar" <% if (!dataEntry.dia) { %>selected<% } %>>Elegí</option>
							<% for (let dia = 1; dia < 32; dia++) { %>
								<option value="<%= dia %>" 
									<% if (dia > 29) { %>class="ocultar"<% } %>
									<% if (dataEntry.dia == dia) { %>selected<% } %>
								>
									<%= dia %>
								</option>
							<% } %>
						</select>
					</div>
					<!-- Fecha desconocida -->
					<div class="flexRowAlign altoFila">
						<input id="desconocida" class="input" type="checkbox" name="desconocida" tabindex="-1" <% if ((codigo != "agregar") && dataEntry && !dataEntry.dia_del_ano_id) { %>checked<% } %>>
						<label for="desconocida">Sin fecha representativa</label>
					</div>
				</div>
			</div>
		</div>
		<!--Segunda columna-->
		<div id="segundaCol">
			<!-- Repetidos -->
			<div id="repetidos">
				<!-- Título, Ayuda y Error/OK -->
				<div class="flex-row">
					<div class="margenBottomTitulo inputError" style="z-index: 3;">
						<!-- Título -->
						<h3>Nombres con esa fecha</h3>
						<!-- Ayuda -->
						<div class="ayuda">
							<i class="fa-solid fa-circle-question ayudaClick despl_click">
								<ul type="none" class="ayudaMostrar ocultar despl_mostrar">
									<li>Destildalos para controlar si no está ya en nuestra BD</li>
								</ul>
							</i>
						</div>
						<%- include("CMP-errores", {campo:"repetido", display: true}) %>
					</div>
				</div>
				<ul type="none" id="posiblesRepetidos"></ul>
			</div>
			<% if (entidad == "personajes") { %>
				<!-- Año de nacimiento u ocurrencia -->
				<div class="borderTop flex-row">
					<div class="flex-row align-center inputError" style="z-index: 2;">
						<!-- Título -->
						<h3>Año de Nacimiento</h3>
						<input type="text" name="ano" class="input angosto" value="<%= dataEntry.ano %>" autofocus autocomplete="off">
						<!-- Ayuda -->
						<div class="ayuda">
							<i class="fa-solid fa-circle-question ayudaClick despl_click">
								<ul type="dots" class="ayudaMostrar ocultar despl_mostrar">
									<li>Nos ayuda a ubicarlo cronológicamente.</li>
									<li>Si es anterior a Cristo, elegí un valor negativo.</li>
									<li>Si no se conoce el año exacto, por favor hacé tu mejor estimación.</li>
								</ul>
							</i>
						</div>
						<%- include("CMP-Errores", {campo:"ano", display: true}) %>
					</div>
				</div>
			<% } %>
			<% if (entidad == "hechos") { %>
				<!-- Años -->
				<div class="borderTop flex-row">
					<div id="anosHechos" style="z-index: 2;">
						<!-- Título, Ayuda y Error/OK -->
						<div class="flex-row">
							<div class="margenBottomTitulo inputError" style="z-index: 5;">
								<!-- Título -->
								<h3>Años</h3>
								<!-- Ayuda -->
								<div class="ayuda">
									<i class="fa-solid fa-circle-question ayudaClick despl_click">
										<ul type="dots" class="ayudaMostrar ocultar despl_mostrar">
											<li>Nos ayuda a ubicarlo cronológicamente.</li>
											<li>Si es anterior a Cristo, elegí un valor negativo.</li>
											<li>Si no se conoce el año exacto, por favor hacé tu mejor estimación.</li>
										</ul>
									</i>
								</div>
								<%- include("CMP-errores", {campo:"desdeHasta", display: true}) %>
							</div>
						</div>
						<!-- Valores -->
						<div id="valoresAno" class="flex-row space-between">
							<div class="flexRowAlign altoFila">
								<label for="ano">Desde:</label>
								<input id="ano" type="text" name="ano" class="input angosto" value="<%= dataEntry.ano %>" autocomplete="off">
							</div>
							<div class="flexRowAlign altoFila">
								<label for="hasta">Hasta:</label>
								<input id="hasta" type="text" name="hasta" class="input angosto" value="<%= dataEntry.hasta %>" autocomplete="off">
							</div>
						</div>
					</div>
				</div>
			<% } %>
		</div>
	</section>
	<% if (entidad != "valores") { %>
		<!-- Preguntas de RCLV -->
		<section id="preguntas" class="borderTop OK ocultar">
			<!-- Título y Error/OK -->
			<div class="flex-row margenBottomTitulo inputError">
				<!-- Título -->
				<h3 class="">Preguntas de contexto</h3>
				<%- include("CMP-errores", {campo:"RCLI", display: true}) %>
			</div>
			<% if (entidad == "personajes") { %>
				<div id="personajes">
					<!-- CFC/VPC -->
					<div class="flexRowAlign altoFila cfc">
						<label class="izquierda">¿Miembro de la Iglesia Católica o conocido por su relación con ella?</label>
						<div class="flexRowAlign siNo">
							<div class="flexRowAlign">
								<input id="catSI" type="radio" name="categoria_id" value="CFC" <% if (dataEntry.categoria_id=="CFC") { %>checked<% } %> class="RCLI">
								<label for="catSI">SI</label>
							</div>
							<div class="flexRowAlign">
								<input id="catNO" type="radio" name="categoria_id" value="VPC" <% if (dataEntry.categoria_id=="VPC") { %>checked<% } %> class="RCLI">
								<label for="catNO">NO</label>
							</div>
						</div>
					</div>
					<!-- Sexo y Rol en la Iglesia -->
					<div class="flexRowAlign altoFila space-between">
						<!-- Sexo -->
						<div id="sexo_id" class="flexRowAlign ocultar cfc">
							<label class="izquierda">Sexo:</label>
							<div class="flexRowAlign">
								<input type="radio" name="sexo_id" value="V" id="V" <% if (dataEntry.sexo_id=="V") { %>checked<% } %> class="RCLI">
								<label for="V">Varón</label>
							</div>
							<div class="flexRowAlign">
								<input type="radio" name="sexo_id" value="M" id="M" <% if (dataEntry.sexo_id=="M") { %>checked<% } %> class="RCLI">
								<label for="M">Mujer</label>
							</div>
						</div>						
						<!-- Rol en la Iglesia -->
						<div id="sectorRol_iglesia" class="flexRowAlign ocultar cfc">
							<label for="rol_iglesia_id" class="izquierda">Rol en la Iglesia:</label>
							<select name="rol_iglesia_id" class="RCLI">
								<option value="" selected class="ocultar">Elejí una opción</option>
								<% for (let rol_iglesia of roles_iglesia) { %>
									<option value="<%= rol_iglesia.id %>" <% if (dataEntry.rol_iglesia_id==rol_iglesia.id) { %>selected<% } %><% if (rol_iglesia.id=="PC") {%> class="ocultar" <% } %>><%= rol_iglesia.nombre %></option>
								<% } %> 
							</select>
						</div>
					</div>
					<!-- ¿En proceso de canonización? y status -->
					<div class="flexRowAlign altoFila space-between ocultar cfc">
						<!-- ¿En proceso de canonización? -->
						<div class="flexRowAlign">
							<label id="santosanta" class="izquierda">¿Santo o en proceso de canonización?</label>
							<div class="flexRowAlign siNo">
								<div class="flexRowAlign">
									<input id="enProcCanSI" type="radio" name="enProcCan" value="1" <% if (dataEntry.enProcCan==1 || dataEntry.proceso_id) { %>checked<% } %> class="RCLI">
									<label for="enProcCanSI">SI</label>
								</div>
								<div class="flexRowAlign">
									<input id="enProcCanNO" type="radio" name="enProcCan" value="0" <% if (DE&&(dataEntry.enProcCan==0 || !dataEntry.proceso_id)) { %>checked<% } %> class="RCLI">
									<label for="enProcCanNO">NO</label>
								</div>
							</div>
						</div>
						<!-- Status del proceso de canonización -->
						<select name="proceso_id" class="ocultar RCLI cfc">
								<option value="" selected class="ocultar">Elejí una opción</option>
								<% for (let proceso of procs_canoniz) { %>
									<option class="<%- dataEntry.sexo_id != proceso.id.slice(-1) ? 'ocultar' : '' %>" value="<%= proceso.id %>" <% if (dataEntry.proceso_id==proceso.id) { %> selected <% } %>><%= proceso.nombre %></option>
								<% } %> 
						</select>
					</div>
					<!-- Contemporáneo de Jesús -->
					<div id="sector_cnt" class="flexRowAlign altoFila ocultar cfc">
						<label class="izquierda">¿Es contemporáneo de Jesús o los Apóstoles, y los conoció?</label>
						<div class="flexRowAlign siNo">
							<div class="flexRowAlign">
								<input id="cntSI" type="radio" name="cnt" value="1" <% if (dataEntry.cnt==1 || dataEntry.subcategoria_id=="CNT") { %>checked<% } %> class="RCLI">
								<label for="cntSI">SI</label>
							</div>
							<div class="flexRowAlign">
								<input id="cntNO" type="radio" name="cnt" value="0" <% if (DE&&(dataEntry.cnt==0|| dataEntry.subcategoria_id && dataEntry.subcategoria_id!="CNT")) { %>checked<% } %> class="RCLI">
								<label for="cntNO">NO</label>
							</div>
						</div>
					</div>
					<!-- Aparición Mariana -->
					<div id="sectorApMar" class="flexRowAlign altoFila space-between ocultar cfc">
						<div class="flexRowAlign">
							<label class="izquierda">¿Participó en una aparición mariana?</label>
							<div class="flexRowAlign siNo">
								<div class="flexRowAlign">
									<input id="ap_marSI" type="radio" name="ap_mar" value="1" <% if (dataEntry.ap_mar==1 || dataEntry.ap_mar_id) { %>checked<% } %> class="RCLI">
									<label for="ap_marSI">SI</label>
								</div>
								<div class="flexRowAlign">
									<input id="ap_marNO" type="radio" name="ap_mar" value="0" <% if (DE&&(dataEntry.ap_mar==0 || !dataEntry.ap_mar_id)) { %>checked<% } %> class="RCLI">
									<label for="ap_marNO">NO</label>
								</div>
							</div>
						</div>
						<select name="ap_mar_id" id="ap_mar_id" class="ocultar RCLI cfc">
							<option value="" selected class="ocultar">Elejí una opción</option>
							<% apariciones_marianas.forEach(aparicion => { %>
								<option value="<%= aparicion.id %>" <% if (dataEntry.ap_mar_id==aparicion.id) { %>selected<% } %>><%= aparicion.nombre %></option>
							<% }) %> 
						</select>
					</div>
				</div>
			<% } %>
			<% if (entidad == "hechos") { %>
				<div id="hechos">
					<!-- Sólo CFC -->
					<div class="flexRowAlign altoFila cfc">
						<div class="flexRowAlign siNo">
							<div class="flexRowAlign">
								<input id="solo_cfcSI" type="radio" name="solo_cfc" value="1" <% if (dataEntry.solo_cfc==1) { %>checked<% } %> class="RCLI">
								<label for="solo_cfcSI">SI</label>
							</div>
							<div class="flexRowAlign">
								<input id="solo_cfcNO" type="radio" name="solo_cfc" value="0" <% if (DE&&dataEntry.solo_cfc==0) { %>checked<% } %> class="RCLI">
								<label for="solo_cfcNO">NO</label>
							</div>
						</div>
						<label class="derecha">¿Es un hecho específico de la historia de la Iglesia Católica?</label>
					</div>
					<!-- Aparición Mariana -->
					<div id="sectorApMar" class="flexRowAlign altoFila ocultar cfc">
						<div class="flexRowAlign siNo">
							<div class="flexRowAlign">
								<input id="ap_marSI" type="radio" name="ap_mar" value="1" <% if (dataEntry.ap_mar==1) { %>checked<% } %> class="RCLI">
								<label for="ap_marSI">SI</label>
							</div>
							<div class="flexRowAlign">
								<input id="ap_marNO" type="radio" name="ap_mar" value="0" <% if (DE&&dataEntry.ap_mar==0) { %>checked<% } %> class="RCLI">
								<label for="ap_marNO">NO</label>
							</div>
						</div>
						<label class="derecha">¿Es una aparición mariana?</label>
					</div>
				</div>
			<% } %>
		</section>	
	<% } %>
	<!-- Flechas y Botón -->
	<section id="flechas">
		<a href="<%= rutaSalir %>">
			<i id="salir" class="fa-solid fa-circle-left" title="Salir"></i>
		</a>
		<i id="submit" class="fa-solid fa-circle-check inactivo" title="Guardar"></i>
	</section>
</form>
