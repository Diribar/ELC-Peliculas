<button type="menu" class="titulo">Agregá una película a nuestra Base de Datos</button>
<form action="<%= link %>" method="POST" enctype = "multipart/form-data" id="data_entry" class="flex-col" >
	<div id="titulos">
		<h1>Paso 2 de 4: Completá los Datos Pendientes</h1>
		<div class="flex-col" id="links">
			<p>Si necesitás consultar algún dato</p>
			<nav class="flex-row">
				<% tmdb = (data_entry.rubroAPI && data_entry.tmdb_id) ? (data_entry.rubroAPI+"/"+data_entry.tmdb_id) : "search?language=es&query="+data_entry.nombre_original %>
				<% fa = (data_entry.fa_id) ? ("film"+data_entry.fa_id+".html") : "search.php?stext="+data_entry.nombre_original %>
				<% imdb = (data_entry.imdb_id) ? ("title/"+data_entry.imdb_id) : "find?q="+data_entry.nombre_original %>
				<a class="logos" href="https://www.themoviedb.org/<%= tmdb %>" target="_blank"><img src="/imagenes/0-Base/LogoTMDB.jpg" alt="TMDB"></a>
				<a class="logos" href="https://www.filmaffinity.com/es/<%= fa %>" target="_blank"><img src="/imagenes/0-Base/LogoFA.jpg" alt="FA"></a>
				<a class="logos" href="https://www.imdb.com/<%= imdb %>" target="_blank"><img src="/imagenes/0-Base/LogoIMDB.jpg" alt="IMDB"></a>
			</nav>
		</div>
	</div>
	<section class="flex-row">
		<div class="flex-col">  <!--Primera columna-->
			<section class="label-input flex-row">  <!--Título original-->
				<label>Título original</label>
				<div class="formulario-grupo">
					<input type="text" name="nombre_original"
						value="<%= data_entry.nombre_original %>"
					>
					<% if (locals.errores && errores.nombre_original) { %>
						<i class="fas fa-times-circle">
						<span class="mensajeError"><%= errores.nombre_original.msg %></span>
						</i>
					<% } %>
				</div>
			</section>
			<section class="label-input flex-row">  <!--Título en castellano -->
				<label>Título en castellano</label>
				<div class="formulario-grupo">
					<input type="text" name="nombre_castellano"
						value="<%= data_entry.nombre_castellano %>"
					>
					<% if (locals.errores && errores.nombre_castellano) { %>
						<i class="fas fa-times-circle">
						<span class="mensajeError"><%= errores.nombre_castellano.msg %> </span>
						</i>
					<% } %>
				</div>
			</section>
			<section class="label-input flex-row">  <!--Año de estreno-->
				<label>Año de estreno</label>
				<div class="formulario-grupo">
					<input type="text" class="input-numero" name="ano_estreno" placeholder="sólo números"
						value="<%= data_entry.ano_estreno %>"
					>
					<% if (locals.errores && errores.ano_estreno) { %>
						<i class="fas fa-times-circle">
						<span class="mensajeError"><%= errores.ano_estreno.msg %> </span>
						</i>
					<% } %>
				</div>
			</section>
			<section class="label-input flex-row">  <!--Duración-->
				<label>Duración (minutos)</label>
				<div class="formulario-grupo">
					<input type="text" class="input-numero" name="duracion" placeholder="sólo números"
					value="<%= data_entry.duracion %>">
					<% if (locals.errores && errores.duracion) { %>
						<i class="fas fa-times-circle">
						<span class="mensajeError"><%= errores.duracion.msg %></span>
						</i>
					<% } %>
				</div>
			</section>
			<section class="label-input flex-row">  <!--País de origen-->
				<label>País de origen</label>
				<div class="formulario-grupo">
					<% pais_id = data_entry.pais_id && data_entry.pais_id.length ? data_entry.pais_id[0] : "" %>
					<select name="pais_id" class="input">
						<option value="" <% if (pais_id=="") {%> selected <%}%> class="ocultar">Elejí un país</option>
						<% continentes = ["América", "Europa", "Africa", "Asia", "Oceanía"] %> 
						<% for (continente of continentes) { %>
							<optgroup label="<%= continente %> ">
								<% for (n of paises.filter(m => m.continente == continente)) { %>
									<option  value="<%= n.id %>" <% if (pais_id==n.id) { %> selected <% } %>>
										<%= n.nombre %>
									</option>
								<% } %>	
							</optgroup>
						<% } %> 
					</select>
					<% if (locals.errores && errores.pais_id) { %>
						<i class="fas fa-times-circle">
						<span class="mensajeError"><%= errores.pais_id.msg %></span>
						</i>
					<% } %>
				</div>
			</section>
			<section class="label-input flex-row">  <!--Direcctor-->
				<label>Direcctor</label>
				<div class="formulario-grupo">
					<input type="text" class="input" name="director" placeholder=""
						value="<%= locals.data_entry ? data_entry.director : null %>"
					>
					<% if (locals.errores && errores.director) { %>
						<i class="fas fa-times-circle">
						<span class="mensajeError"><%= errores.director.msg %></span>
						</i>
					<% } %>
				</div>
			</section>
			<section class="label-input flex-row">  <!--Guión-->
				<label>Guión</label>
				<div class="formulario-grupo">
					<input type="text" class="input" name="guion" placeholder=""
						value="<%= locals.data_entry ? data_entry.guion : null %>"
					>
					<% if (locals.errores && errores.guion) { %>
						<i class="fas fa-times-circle">
						<span class="mensajeError"><%= errores.guion.msg %></span>
						</i>
					<% } %>
				</div>
			</section>
			<section class="label-input flex-row">  <!--Música-->
				<label>Música</label>
				<div class="formulario-grupo">
					<input type="text" class="input" name="musica" placeholder=""
						value="<%= locals.data_entry ? data_entry.musica : null %>"
					>
					<% if (locals.errores && errores.musica) { %>
						<i class="fas fa-times-circle">
						<span class="mensajeError"><%= errores.musica.msg %></span>
						</i>
					<% } %>
				</div>
			</section>
			<section class="label-input flex-row">  <!--Actores-->
				<label>Actores</label>
				<div class="formulario-grupo">
					<input type="text" class="input" name="actores" placeholder=""
						value="<%= locals.data_entry ? data_entry.actores : null %>"
					>
					<% if (locals.errores && errores.actores) { %>
						<i class="fas fa-times-circle">
						<span class="mensajeError"><%= errores.actores.msg %></span>
						</i>
					<% } %>
				</div>
			</section>
			<section class="label-input flex-row">  <!--Productor-->
				<label>Productor</label>
				<div class="formulario-grupo">
					<input type="text" class="input" name="productor" placeholder=""
						value="<%= locals.data_entry ? data_entry.productor : null %>"
					>
					<% if (locals.errores && errores.productor) { %>
						<i class="fas fa-times-circle">
						<span class="mensajeError"><%= errores.productor.msg %></span>
						</i>
					<% } %>
				</div>
			</section>
		</div>
		<div id="columnaMedio"> <!--Columna intermedia-->
		</div>
		<div class="flex-col">  <!--Segunda columna-->
			<section class="border" id="imagenPeli">
				<label for="imagen">
					<img src="<%= data_entry.avatar %>" alt="">
				</label>
				<input name="imagen" type="file" accept="image/*" value="<%= data_entry.imagen %>" id="imagen" class="ocultar">
			</section>
		</div>	
	</section>
	<button type="submit">Enviar</button>
</form>
